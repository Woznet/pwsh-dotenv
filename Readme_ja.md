## PowerShell Dotenv Module

PowerShellで`.env`ファイルを読み込み、環境変数に反映させるためのモジュールです。

## 使用方法

* Functions:
  * `Import-Dotenv` - .evn ファイルを読み込んで環境変数にロードする。
  * `Read-Dotenv` - .evnファイルを読み込んでHashtableに変換する。
  * `ConvertFrom-Dotenv` - .evn形式の文字列をHashtableに変換する。

### 基本的な使用

- カレントディレクトリにある`.env`ファイルを読み込んで環境変数に反映するには、以下のコマンドを使用します。

```powershell
Import-Dotenv
```

または短縮形として以下も使用できます。

```powershell
dotenv
```

### 特定のファイルを指定

- 特定の`.env`ファイル（例えば`test.env`）を読み込むには、`-Path`オプションを使用します。

```powershell
Import-Dotenv -Path test.env
```

### エラー無視オプション

- ファイルが存在しない場合のエラーを無視して読み込むには、`-SkipReadErrorCheck`オプションを使用します。

```powershell
Import-Dotenv -Path test.env -SkipReadErrorCheck
```

### 既存の環境変数の上書き

- `.env`ファイルを読み込む際に、既存の環境変数を上書きするには、`-AllowClobber`オプションを使用します。

```powershell
Import-Dotenv -AllowClobber
```

### .envファイルの読み込み

- `.env`ファイルを読み込んでHashtableで返却するには、以下のコマンドを使用します。

```powershell
$env = Read-Dotenv
```

このコマンドは、`.env`ファイルの内容を読み込み、キーと値のペアを含むHashtableオブジェクトとして返却します。

### .env形式の文字列の変換

- `.env`形式の文字列をHashtableに変換するには、以下のコマンドを使用します。

```powershell
$env = "TEST1=1`nTEST2=2" | ConvertFrom-Dotenv
```

このコマンドは、指定された文字列形式の`.env`データ（この例では`TEST1=1`と`TEST2=2`）を受け取り、キーと値のペアを含むHashtableオブジェクトとして返却します。


## .envファイルの仕様

### 形式
- `.env`ファイルは `キー=値` の形式で記述されます。
- 各行は1つのイコール記号（`=`）でキーと値に分けられます。

### キーの仕様
- キーは英字（大文字・小文字）、数字、アンダースコア（`_`）で構成されます。
- キーの最初の文字は英字かアンダースコアでなければなりません。
- キーのパターン： `[a-zA-Z_][a-zA-Z0-9_]*`

### コメント
- `#`で始まる行はコメントとして扱われ、行末まで無視されます。

### 値の指定
- 値はダブルクォーテーション（`"`）またはシングルクォーテーション（`'`）で囲むことができます。
- クォーテーションで囲むと、複数行にわたる値を指定できます。
- `#`の後ろに続くテキストはコメントとして扱われます。

### 特殊文字とエスケープ
- `$`記号を使用して既存の環境変数を参照できます。
- `\` を使用して特殊文字をエスケープできます。
- シングルクォーテーションで囲んだ場合、変数展開や特殊文字のエスケープは行われません。

### 変数展開
- シェルスタイルの変数展開（`${variable}`）が可能です。
- デフォルト値の指定： `${variable:-default_value}` で、変数が未設定または空の場合にデフォルト値を使用します。

### .envの書き方の例
```env
# ダブルクォーテーションで囲うことができる
ABC="123"
# シングルクォーテーションで囲うことができる
DEF='456'
# 複数行の値
GHI="1行目
2行目
3行目
"

# コメントの例
J="123" # これはコメントです
K=456# これもコメントです

# 環境変数の展開
L=$PWD
M="$PWD"
# シングルクォーテーションでは展開されない
N='$PWD'

# 特殊文字のエスケープ
O="\"" # ダブルクォーテーション
P="\$" # ドル記号
Q="\'" # シングルクォーテーション
R="\\" # バックスラッシュ
S="\n" # 改行(LF)
T="\r" # 復帰(CR)
U="\t" # タブ

# シングルクォーテーションの特殊文字のエスケープ
SQ='\'' # Single quote
SR='\\' # Backslash

# 変数展開
V=${PWD}
W="${PWD}"
# デフォルト値の指定
X="${NOTFOUND:-default_value}"
Y="${NOTFOUND:-$PWD/bin}"
Z="${NOTFOUND:-${NESTED_NOTFOUND:-default_value}}"
```
